var pressed = !1, over = !1, letters = [], allWords = [], wordHash = []; function showToast(e, t) { let r; "sad" === t ? r = { style: { main: { background: "#c00000c4", color: "white", "font-weight": 700, opacity: 1, "box-shadow": "rgb(0 0 0 / 50 %) 0px 0px 10px 0px" } }, settings: { duration: 700 } } : "happy" === t && (r = { style: { main: { background: "green", color: "white", "font-weight": 700, opacity: 1, "box-shadow": "rgb(0 0 0 / 50 %) 0px 0px 10px 0px" } }, settings: { duration: 3e3 } }), console.log(r), iqwerty.toast.toast(e, r) } function keyPress(e) { if (!pressed && !over) { pressed = !0; var t = e.key; handleInput(e.keyCode, t) } } function handleInput(e, t) { 13 == e ? enterEvent() : e >= 65 && e <= 90 ? addLetter(t) : e >= 97 && e <= 122 ? addLetter(t) : 8 == e && clearLastLetter() } function addLetter(e) { if (row >= tryCount) return; let t = row; for (let r = 0; r < letterCount; r++) { let o = document.getElementById("i" + t + "j" + r); if (!o.innerHTML) return o.innerHTML = e, letters.push({ char: e.toUpperCase(), color: "default" }), localStorage.setItem("letters", JSON.stringify(letters)), void (col = (letters.length - 1) % letterCount) } } function enterEvent() { if (row < tryCount && col == letterCount - 1) { if (document.getElementById("i" + row + "j" + (letterCount - 1)).innerHTML) { if (-1 === allWords.indexOf(getTypedWord(row).toLowerCase())) return void showToast("Invalid word!", "sad"); matchAttempt(), row++, localStorage.setItem("row", JSON.stringify(row)) } } } function getTypedWord(e) { let t = e, r = ""; for (let e = 0; e < letterCount; e++) { r += document.getElementById("i" + t + "j" + e).innerHTML } return r } function matchAttempt() { var e = 0; for (let t = letters.length - letterCount, r = 0; t < letters.length; t++, r++) { let o = letters[t], n = hashThis(o.char); console.log(o), console.log(n); let l = getAllIndexes(wordHash, n); l && 0 !== l.length ? -1 !== l.indexOf(r) ? (o.color = "green", e++) : o.color = "orange" : o.color = "grey" } e === letterCount && (over = !0, showToast("Congratulations", "happy")), localStorage.setItem("letters", JSON.stringify(letters)), loadLetters() } function loadLetters() { let e = 0; if (letters.length > 0) for (let r = 0; r < tryCount; r++)for (let o = 0; o < letterCount; o++) { let n = document.getElementById("i" + r + "j" + o); if (e < letters.length) { var t = letters[e++]; n.innerHTML = t.char, n.classList.add(t.color) } else n.innerHTML = null } } function clearLastLetter() { if (row >= tryCount) return; let e = row; for (let t = letterCount - 1; t >= 0; t--) { let r = document.getElementById("i" + e + "j" + t); if (r.innerHTML) return r.innerHTML = null, letters.pop(), localStorage.setItem("letters", JSON.stringify(letters)), void (col = (letters.length - 1) % letterCount) } } function hashThis(e) { let t = new jsSHA("SHA-256", "TEXT", { encoding: "UTF8" }); return t.update(e), "0x" + t.getHash("HEX") } function getAllIndexes(e, t) { var r, o = []; for (r = 0; r < e.length; r++)e[r] === t && o.push(r); return o } function refreshDataset() { localStorage.removeItem("letters"), localStorage.removeItem("row"), over = !1 } function refresh() { localStorage.clear(), over = !1, console.log(wordHash) } function onChange(e) { } function onKeyPress(e) { "{enter}" === e ? handleInput(13, "") : "{bksp}" === e ? handleInput(8, "") : handleInput(e.charCodeAt(0), e) } row = 0, col = 0, document.addEventListener("keydown", keyPress), document.addEventListener("keyup", () => { pressed = !1 }), window.onload = function () { var e = JSON.parse(localStorage.getItem("wordHash")); if (e) if (e.length === wordHash.length) { for (let t = 0; t < e.length; t++)if (e[t] !== wordHash[t]) { localStorage.setItem("wordHash", JSON.stringify(wordHash)), refreshDataset(); break } } else localStorage.setItem("wordHash", JSON.stringify(wordHash)), refreshDataset(); else localStorage.setItem("wordHash", JSON.stringify(wordHash)), refreshDataset(); fetch("/words").then(e => e.json()).then(e => allWords = e), (letters = JSON.parse(localStorage.getItem("letters"))) || (letters = []), col = (letters.length - 1) % letterCount, row = JSON.parse(localStorage.getItem("row")), row || (row = 0), loadLetters() }; var deskKeyboardOptions = { layoutName: "shift", layout: { default: ["q w e r t y u i o p", "a s d f g h j k l", "z x c v b n m", "{enter} {bksp}"], shift: ["Q W E R T Y U I O P", "A S D F G H J K L {enter}", "Z X C V B N M {bksp}"] }, display: { "{bksp}": "DEL", "{enter}": "ENTER" }, disableButtonHold: !1 }, mobileKeyboardOptions = { layoutName: "shift", layout: { default: ["q w e r t y u i o p", "a s d f g h j k l", "z x c v b n m", "{enter} {bksp}"], shift: ["Q W E R T Y U I O P", "A S D F G H J K L", "Z X C V B N M", "{enter} {bksp}"] }, display: { "{bksp}": "DEL", "{enter}": "ENTER" }, disableButtonHold: !1 };